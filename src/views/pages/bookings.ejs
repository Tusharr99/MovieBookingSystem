<%- include('../partials/header', { title, user }) %>
<section class="space-y-6">
  <div class="flex items-center justify-between">
    <div>
      <p class="text-sm uppercase tracking-wide text-emerald-300">Your tickets</p>
      <h1 class="text-2xl font-semibold">Bookings</h1>
    </div>
  </div>

  <% if (!bookings || !bookings.length) { %>
    <div class="bg-slate-900 border border-slate-800 rounded p-4 text-slate-300">
      No bookings yet. <a class="text-emerald-300 hover:text-emerald-200" href="/book">Book a show</a>.
    </div>
  <% } else { %>
    <div class="space-y-3">
      <% bookings.forEach(b => { %>
        <div class="bg-slate-900 border border-slate-800 rounded p-4 shadow shadow-emerald-900/30">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
            <div class="space-y-1">
              <p class="text-sm text-slate-400"><%= b.screening?.theatre?.name %> <%= b.screening?.theatre?.location ? ' - ' + b.screening.theatre.location : '' %></p>
              <p class="text-lg font-semibold text-emerald-200"><%= b.screening?.movie?.title %></p>
              <p class="text-sm text-slate-300"><%= new Date(b.screening?.startTime).toLocaleString() %></p>
            </div>
            <div class="text-right text-sm text-slate-300">
              <p>Seats: <span class="text-emerald-300"><%= b.seats.join(', ') %></span></p>
              <p>Total: <%= b.total %></p>
              <p class="text-xs text-slate-400">Status: <span class="text-emerald-300"><%= b.status %></span></p>
              <p class="text-xs text-slate-400">Payment: <%= b.paymentRef || 'N/A' %></p>
            </div>
          </div>
          <div class="flex items-center gap-3 mt-3 text-sm">
            <a class="px-3 py-1 rounded border border-slate-700 text-slate-200 hover:border-emerald-400" href="/ticket/<%= b._id %>">View ticket</a>
            <% if (b.screening?.movie?._id) { %>
              <a class="px-3 py-1 rounded border border-slate-700 text-slate-200 hover:border-emerald-400" href="/book/<%= b.screening.movie._id %>">Book again</a>
            <% } %>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</section>
<%- include('../partials/footer') %>

